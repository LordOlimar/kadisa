<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body onload="refresh()">
<div class="container">
    <div class="content">
        <h1>Kadisa</h1>
        <p>Celebrating an entire year of the most adorable kitty in the world!</p>
        <button id="randomize">Randomize!</button>

        <img id="kitty" src="">
    </div>
</div>


<script>
    const maxImages=353
    if (document.body.animate) {
        document.querySelector('#randomize').addEventListener('click', catpop);
    }
    function catpop(e) {
        refresh();
        for (let i = 0; i < 30; i++) {
            createParticle(e.clientX, e.clientY);
        }
    }
    function createParticle(x, y) {
        const particle = document.createElement('particle');
        document.querySelector(".content").appendChild(particle);
        const size = Math.floor(Math.random() * 20 + 5);
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.innerHTML = "🐱";
        const destinationX = x + (Math.random() - 0.5) * 2 * 75;
        const destinationY = y + (Math.random() - 0.5) * 2 * 75;

        const animation = particle.animate([
            {
                transform: `translate(${x - (size / 2)}px, ${y - (size / 2)}px)`,
                opacity: 1
            },
            {
                transform: `translate(${destinationX}px, ${destinationY}px)`,
                opacity: 0
            }
        ], {
            // Set a random duration from 500 to 1500ms
            duration: 500 + Math.random() * 1000,
            easing: 'cubic-bezier(0, .9, .57, 1)',
            // Delay every particle with a random value from 0ms to 200ms
            delay: Math.random() * 200
        });
        animation.onfinish = () => {
            particle.remove();
        };
    }
    function refresh(){
        document.querySelector("#kitty").setAttribute("src", `/cats/cat${Math.floor(Math.random()*maxImages+1)}.jpg`)
    }
</script>

</body>
</html>